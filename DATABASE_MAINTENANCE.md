# ุตูุงูุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช - Database Maintenance

## ๐ ุจูุงูุงุช ุงูุฏุฎูู ุงูุงูุชุฑุงุถูุฉ
```
ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: admin@example.com
ูููุฉ ุงููุฑูุฑ: admin
```

## ๐๏ธ ุญู ูุดููุฉ ููุฏุงู ุงูุจูุงูุงุช

ุฅุฐุง ูุงุฌูุช ูุดููุฉ ูู ุชุณุฌูู ุงูุฏุฎูู ุฃู ููุฏุงู ุงูุจูุงูุงุชุ ุงุชุจุน ุงูุฎุทูุงุช ุงูุชุงููุฉ:

### ุงูุทุฑููุฉ 1: ุชุดุบูู ุณูุฑูุจุช ุงูุชููุฆุฉ (ููุตู ุจู)

```bash
cd /app/backend
python3 init_db.py
```

ูุฐุง ุงูุณูุฑูุจุช ุณูููู ุจู:
- โ ุงูุชุฃูุฏ ูู ูุฌูุฏ ูุณุชุฎุฏู admin
- โ ุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ ุฅูู "admin"
- โ ุฅูุดุงุก ุงูุงุฎุชุตุงุตุงุช ุงูุงูุชุฑุงุถูุฉ
- โ ุฅูุดุงุก ุฃุญูุงุก ุชุฌุฑูุจูุฉ (ุฅุฐุง ูู ุชูู ููุฌูุฏุฉ)
- โ ุนุฑุถ ููุฎุต ููุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุทุฑููุฉ 2: ุฅุนุงุฏุฉ ุชุดุบูู Backend

```bash
sudo supervisorctl restart backend
```

ุนูุฏ ุฅุนุงุฏุฉ ุชุดุบูู Backendุ ุณูููู ุชููุงุฆูุงู ุจู:
- ุงูุชุฃูุฏ ูู ูุฌูุฏ ูุณุชุฎุฏู admin
- ุฅูุดุงุก ุงูุงุฎุชุตุงุตุงุช ุงูุงูุชุฑุงุถูุฉ

### ุงูุทุฑููุฉ 3: ุงูุชุญูู ุงููุฏูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

```bash
python3 << 'EOF'
from pymongo import MongoClient
client = MongoClient("mongodb://localhost:27017/")
db = client['tabni_platform']

# ุนุฑุถ ุนุฏุฏ ุงููุณุชุฎุฏููู
print(f"Users: {db.users.count_documents({})}")

# ุนุฑุถ ุจุฑูุฏ ุงููุณุชุฎุฏู ุงูุฃูู
user = db.users.find_one({"email": "admin@example.com"})
if user:
    print("โ Admin user exists")
else:
    print("โ Admin user not found")

client.close()
EOF
```

## ๐ ูุนูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```
tabni_platform
```

### Collections ุงููุณุชุฎุฏูุฉ
- `users` - ุงููุณุชุฎุฏููู
- `neighborhoods` - ุงูุฃุญูุงุก
- `positions` - ุงูุงุฎุชุตุงุตุงุช
- `families` - ุงูุนุงุฆูุงุช
- `health_cases` - ุงูุญุงูุงุช ุงูุตุญูุฉ
- `courses` - ุงูุฏูุฑุงุช
- `projects` - ุงููุดุงุฑูุน
- `initiatives` - ุงููุจุงุฏุฑุงุช
- `stories` - ูุตุต ุงููุฌุงุญ
- `donations` - ุงูุชุจุฑุนุงุช
- `hero_content` - ูุญุชูู Hero Section
- `mission_content` - ูุญุชูู ุตูุญุฉ ุงูุฑุคูุฉ

## ๐ ุชุดุฎูุต ุงููุดุงูู

### ูุดููุฉ: ูุง ุฃุณุชุทูุน ุชุณุฌูู ุงูุฏุฎูู

**ุงูุญู:**
```bash
cd /app/backend
python3 init_db.py
```

ุซู ุญุงูู ุชุณุฌูู ุงูุฏุฎูู ุจู: `admin@example.com / admin`

### ูุดููุฉ: ุงูุจูุงูุงุช ุชุฎุชูู ุจุนุฏ ุฅุนุงุฏุฉ ุงูุชุดุบูู

**ุงูุณุจุจ ุงููุญุชูู:** ุงุชุตุงู ุจูุงุนุฏุฉ ุจูุงูุงุช ุฎุงุทุฆุฉ

**ุงูุชุญูู:**
```bash
cat /app/backend/.env | grep DB_NAME
```

ูุฌุจ ุฃู ูููู ุงููุงุชุฌ: `DB_NAME=tabni_platform`

**ุงูุญู:**
ุฅุฐุง ูุงู ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุฎุชููุ ุนุฏููู ูู `/app/backend/.env` ุซู:
```bash
sudo supervisorctl restart backend
```

### ูุดููุฉ: ุฎุทุฃ ูู ูููุฉ ุงููุฑูุฑ

**ุงูุญู:**
ุดุบูู ุงูุณูุฑูุจุช ูุฅุนุงุฏุฉ ุชุนููู ูููุฉ ุงููุฑูุฑ:
```bash
cd /app/backend
python3 init_db.py
```

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงุณู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุตุญูุญ**: `tabni_platform`
2. **ุนุฏู ุชุบููุฑ DB_NAME**: ูุง ุชุบูุฑ ูููุฉ `DB_NAME` ูู ููู `.env`
3. **ูุณุฎุฉ ุงุญุชูุงุทูุฉ**: ูููุตุญ ุจุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจุดูู ุฏูุฑู

## ๐ ุฃุฎุฐ ูุณุฎุฉ ุงุญุชูุงุทูุฉ

```bash
mongodump --db=tabni_platform --out=/tmp/backup_$(date +%Y%m%d_%H%M%S)
```

## ๐ฅ ุงุณุชุนุงุฏุฉ ูุณุฎุฉ ุงุญุชูุงุทูุฉ

```bash
mongorestore --db=tabni_platform /path/to/backup/tabni_platform
```

## ๐ ุงูุฏุนู

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ุชุญูู ูู:
1. ุณุฌูุงุช Backend: `tail -f /var/log/supervisor/backend.*.log`
2. ุญุงูุฉ ุงูุฎุฏูุฉ: `sudo supervisorctl status backend`
3. ุงุชุตุงู MongoDB: `mongo --eval "db.adminCommand('ping')"`
